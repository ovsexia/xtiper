/*
 * author: ovsexia
 * version: 2.6.6
 * name: Xtiper
 * describe: 弹层弹窗解决方案
 * License: Mozilla Public License Version 2.0
 */
!function(a,c){var b=function(e){var i=this;i.loseblur();i.ifmob=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);var h=Math.random().toString().split(".")[1];var g="xtiper_"+h;i.mainid=g;e=i.namefix(e);i.c=e;var d="";if(typeof(e.reset)!="undefined"&&e.reset!==null&&e.reset===false){for(var f in e){if(e[f]!=null){d+=e[f].toString()}}i.xcstr=i.xcstrRep(d)}else{i.xcstr=d}if(e.model=="close"){i.close(e.closeid);return false}if(e.model=="closeAll"){i.closeAll();return false}i.creat()};b.pt=b.prototype;b.pt.loseblur=function(){var f=document.getElementsByTagName("button");if(f.length>0){for(var e=0;e<f.length;e++){f[e].blur()}}var d=document.getElementsByTagName("input");if(d.length>0){for(var e=0;e<d.length;e++){input_type=d[e].getAttribute("type");if(input_type&&(input_type=="button"||input_type=="submit")){d[e].blur()}}}};b.pt.creat=function(){var g=this;var i=g.c;var f=g.html();if(!f){return false}var d=document.body;var h=document.createElement("div");h.setAttribute("id",g.mainid);h.setAttribute("class","xtiper");h.innerHTML=f;d.appendChild(h);var e=document.getElementById(g.mainid);g.xtipdiv=e;g.attr();g.on();g.after()};b.pt.namefix=function(d){if(d.pos){d.pos=d.pos.toLowerCase();if(d.pos=="t"){d.pos="top"}else{if(d.pos=="b"){d.pos="bottom"}else{if(d.pos=="l"){d.pos="left"}else{if(d.pos=="r"){d.pos="right"}else{if(d.pos=="m"){d.pos="middle"}}}}}}if(d.type){d.type=d.type.toLowerCase();if(d.type=="r"){d.type="ready"}else{if(d.type=="n"){d.type="noready"}else{if(d.type=="notready"){d.type="noready"}else{if(d.type=="u"){d.type="url"}else{if(d.type=="h"){d.type="html"}else{if(d.type=="p"){d.type="photo"}else{if(d.type=="w"){d.type="white"}else{if(d.type=="b"){d.type="black"}else{if(d.type=="a"){d.type="alert"}else{if(d.type=="c"){d.type="confirm"}}}}}}}}}}}d.iconColor="";if(d.icon){if(typeof(d.icon)=="object"){d.iconColor=d.icon[1];d.icon=d.icon[0]}d.icon=d.icon.toLowerCase();d.iconFlag=true;if(d.icon=="s"){d.icon="success"}else{if(d.icon=="e"){d.icon="error"}else{if(d.icon=="w"){d.icon="warning"}else{if(d.icon=="a"){d.icon="ask"}else{if(d.icon=="h"){d.icon="hello"}}}}}if(d.icon!=="success"&&d.icon!=="error"&&d.icon!=="warning"&&d.icon!=="ask"&&d.icon!=="hello"){d.iconFlag=false}}if(d.align){d.align=d.align.toLowerCase();if(d.align=="l"){d.align="left"}else{if(d.align=="c"){d.align="center"}else{if(d.align=="r"){d.align="right"}}}}return d};b.pt.html=function(){var p=this;var F=p.c;var s=p.xtipdiv;var q="";if(F.model=="msg"){q+="<p>";if(F.icon){q+=F.iconFlag===true?'<i class="xtiper_icon xtiper_icon_'+F.icon+' xtiper_icon_min"></i>':'<img class="xtiper_icon xtiper_icon_min" src="'+F.icon+'" />'}q+=F.tip+"</p>"}else{if(F.model=="danmu"){var k=document.getElementsByClassName("xtiper_danmu");if(k.length>300||document.hidden){return false}q+="<p>";if(F.icon){q+=F.iconFlag===true?'<i class="xtiper_icon xtiper_icon_'+F.icon+' xtiper_icon_min"></i>':'<img class="xtiper_icon xtiper_icon_min" src="'+F.icon+'" />'}q+=F.tip+"</p>"}else{if(F.model=="tips"){p.newelement=document.getElementById(F.element)||F.element;if(F.bgcolor){q+='<p style="background-color:'+F.bgcolor+";"+(F.color?" color:"+F.color+';"':"")+'">'+F.tip+"</p>"}else{q+="<p>"+F.tip+"</p>"}q+='<em style="background-color:'+F.bgcolor+';"></em>';if(F.closeBtn===true){q+='<div class="xtiper_close xtiper_close_notit xtiper_close_notitmin"></div>'}}else{if(F.model=="win"){if(F.type=="alert"){F.btn=F.btn!=null?F.btn:["确定"];F.btn1=1===2?null:function(){return false};F.btn2=null;F.btn3=null;F.btn4=null}else{if(F.type=="confirm"){F.btn=F.btn!=null?F.btn:["确定","取消"];F.btn1=F.btn1!=null?F.btn1:function(){return false};F.btn2=F.btn2!=null?F.btn2:null;F.btn3=F.btn3!=null?F.btn3:null;F.btn4=F.btn4!=null?F.btn4:null}}xtiper_con_icon=F.icon?" xtiper_con_icon":"";var I=new Array();I[0]=F.btn1!=null?' class="xactive"':"";I[1]=F.btn2!=null?' class="xactive"':"";I[2]=F.btn3!=null?' class="xactive"':"";I[3]=F.btn4!=null?' class="xactive"':"";var E=new Array();E[0]=F.btn1?F.btn1:null;E[1]=F.btn2?F.btn2:null;E[2]=F.btn3?F.btn3:null;E[3]=F.btn4?F.btn4:null;p.btnfun=E;if(F.maxWidth){F.width=p.maxSize(F.width,F.maxWidth)}if(F.shade===true){q+='<div class="xtiper_bg"></div>'}q+='<div class="xtiper_main"'+(F.width?'style="width:'+F.width+';"':"")+">";q+='<div class="xtiper_tit"><p>'+F.title+'</p><div class="xtiper_minmax">';if(F.min===true){q+='<div class="xtiper_min"></div>'}q+='<div class="xtiper_close"></div>';q+="</div></div>";var l=p.iconer();q+='<div class="xtiper_pad"><div class="xtiper_pr"><div class="xtiper_tip">'+l+'<div class="xtiper_con'+xtiper_con_icon+'"><div class="xtiper_conin">'+F.tip;if(F.type=="alert"&&F.times>0){F.times++;q+='(<span class="xtiper_times">'+F.times+"</span>)"}q+="</div></div></div></div></div>";q+='<div class="xtiper_btn'+(F.icon&&F.iconFlag===true?" xtiper_btn_"+F.icon:"")+" xtiper_btn"+F.btn.length+'"><ul>';for(var C=0;C<4;C++){if(F.btn[C]){q+="<li"+I[C]+"><button"+(I[C]&&F.iconColor&&F.type=="confirm"?' style="background-color:'+F.iconColor+'"':"")+">"+F.btn[C]+"</button></li>"}}q+='</ul><div class="xtiper_btnbor"'+(F.iconColor?' style="background-color:'+F.iconColor+'"':"")+"></div></div></div>"}else{if(F.model=="open"){ifxoff=p.findxoff();if(ifxoff===true){return false}if(F.maxWidth){F.width=p.maxSize(F.width,F.maxWidth)}if(F.maxHeight){F.height=p.maxSize(F.height,F.maxHeight)}if(F.width=="100%"&&F.height=="100%"){F.max=false}var w=p.getsize(F.width);var v=p.getsize(F.height)||["",""];if(v[1]=="%"){var m=a.innerHeight*v[0]/100;v[0]=Math.round(m);v[1]="px"}var n="";if(F.title){n=" xtit"}else{if(F.move===true){n=" xmin"}}var j;var x="";if(F.over===false){x=" xtiper_over"}if(F.type=="ready"||F.type=="noready"){var A=F.content.substr(0,1),e,y,h;if(A=="#"){e=document.getElementById(F.content.substr(1,F.content.length))}else{if(A=="."){e=document.getElementsByClassName(F.content.substr(1,F.content.length))[0]}else{return false}}if(!e){return false}if(F.type=="ready"){y=e.outerHTML;regid=/\#([A-z0-9_-]*)/;content_id=(F.content).match(regid);if(content_id&&content_id[1]){h=new RegExp("\\s+(id\\=[\"']asd[\"'])","g");y=y.replace(h,"")}}else{y=e.innerHTML;h=/\<\!\-{2}[\s\n]*([\S\s]*)[\s\n]*\-{2}\>/;var o=y.match(h);if(!o||!o[1]){return false}y=o[1]}j='<div class="xtiper_content'+x+""+n+'"'+(F.bgcolor?' style="background-color:'+F.bgcolor+'"':"")+">"+y+"</div>"}else{if(F.type=="url"){var u="auto";if(F.over===false){var u="no"}j='<div class="xtiper_content'+n+' xtiper_over"'+(F.bgcolor?' style="background-color:'+F.bgcolor+'"':"")+'><div class="zw"></div><iframe parentid="'+p.mainid+'" scrolling="'+u+'" allowtransparency="true" frameborder="0" src="'+F.content+'" style="width:100%; height:100%;"></iframe></div>'}else{if(F.type=="html"){j='<div class="xtiper_content'+x+""+n+'"'+(F.bgcolor?' style="background-color:'+F.bgcolor+'"':"")+">"+F.content+"</div>"}else{if(F.type=="photo"){var H=document.getElementsByTagName("img");if(H.length==0){return false}var f=new Array();for(var C=0;C<H.length;C++){if(p.dataset(H[C],"xphoto")==F.content){f.push(H[C])}}if(!f||f.length==0){return false}var t='<div class="xtiper_photo_num'+(F.iftitle===true?" xon":"")+'"'+(F.color?'style="color:'+F.color+';"':"")+'><span class="xtiper_words"></span><span class="xtiper_nummax'+(F.iforder===true?" xon":"")+'"><span class="xtiper_num">'+F.index+"</span> / "+f.length+"</span></div>";if(f.length>1){t+='<div class="xtiper_photo_btn xtiper_photo_prev"></div><div class="xtiper_photo_btn xtiper_photo_next"></div>'}t+='<div class="xtiper_photo_ul"><ul>';var D,g;var d=F.index-1;for(var C=0;C<f.length;C++){D=p.dataset(f[C],"xhref")?p.dataset(f[C],"xhref"):"";g=p.dataset(f[C],"xsrc")?p.dataset(f[C],"xsrc"):f[C].src;t+='<li class="xtiper_photo_li'+(C==d?" xon":"")+(p.ifmob===true?" xapp":"")+'" data-xtitle="'+f[C].title+'"><p style="background-image:url(\''+g+"');\">"+(D?'<a href="'+D+'" target="_blank">':"")+'<img src="'+g+'">'+(D?"</a>":"")+(C==d&&p.ifmob===true?'<span class="xtiper_icon xtiper_icon_load xtiper_photo_load"></span>':"")+"</p></li>"}t+="</ul></div>";j='<div class="xtiper_content'+x+""+n+'"'+(F.bgcolor?' style="background-color:'+F.bgcolor+'"':"")+">"+t+"</div>"}}}}if(F.shade===true){q+='<div class="xtiper_bg"></div>'}if(F.app===true){q+='<div class="xtiper_sheet'+(p.ifmob===true&&F.type=="photo"?" xapp":"")+'" style="height:'+v[0]+""+v[1]+';">';if(F.title){q+='<div class="xtiper_sheet_tit xtiper_sheet_left">'+F.title+"</div>"}}else{q+='<div class="xtiper_main'+(p.ifmob===true&&F.type=="photo"?" xapp":"")+'" style="width:'+w[0]+""+w[1]+"; height:"+v[0]+""+v[1]+';">';if(F.title){q+='<div class="xtiper_tit'+(F.move===true?"":" xminmax")+'"><p>'+F.title+'</p><div class="xtiper_minmax">';if(F.min===true){q+='<div class="xtiper_min"></div>'}if(F.max===true){q+='<div class="xtiper_max"></div>'}if(F.closeBtn===true){q+='<div class="xtiper_close"></div>'}q+="</div></div>"}else{if(F.move===true){q+='<div class="xtiper_tit xtiper_tit_none"></div>'}if(F.closeBtn===true){q+='<div class="xtiper_close xtiper_close_notit'+(F.photoapp===true?" xtiper_close_photoapp":"")+'"></div>'}}}q+=j;q+="</div>"}else{if(F.model=="load"){q='<div class="xtiper_bg xtiper_bg_white"></div><div class="xtiper_loadin"><div class="xtiper_icon xtiper_icon_load"></div>';if(F.tip){q+="<span>"+F.tip+"</span>"}q+="</div>";if(F.closeBtn===true){q+='<div class="xtiper_close xtiper_close_load"></div>'}}else{if(F.model=="sheet"){var E=new Array();E[0]=F.btn1?F.btn1:null;E[1]=F.btn2?F.btn2:null;E[2]=F.btn3?F.btn3:null;E[3]=F.btn4?F.btn4:null;E[4]=F.btn5?F.btn5:null;E[5]=F.btn6?F.btn6:null;E[6]=F.btn7?F.btn7:null;E[7]=F.btn8?F.btn8:null;p.btnfun=E;var z="xtiper_sheet_"+F.align;q+='<div class="xtiper_bg"></div><div class="xtiper_sheet">';if(F.title){q+='<div class="xtiper_sheet_tit '+z+'">'+F.title+"</div>"}q+='<ul class="xtiper_sheet_ul '+z+'">';var r,B,G;for(var C=0;C<F.btn.length;C++){if(E[C]){if(typeof(E[C])=="function"){r="<p>"+F.btn[C]+"</p>"}else{if(typeof(E[C])=="object"){B=E[C][0];G=E[C][1]?E[C][1]:"";if(G&&G.substr(0,1)!="_"){G="_"+G}G=' target="'+G+'"'}else{B=E[C];G=""}r='<a href="'+B+'"'+G+"><p>"+F.btn[C]+"</p></a>"}}else{r="<p>"+F.btn[C]+"</p>"}q+='<li class="xtiper_sheet_li">'+r+"</li>"}if(!F.force){q+='<li class="xtiper_sheet_li xlast"><p>'+F.btnClose+"</p></li>"}q+="</ul></div>"}}}}}}}return q};b.pt.iconer=function(){var e=this;var f=e.c;var d="";if(f.icon){if(f.iconFlag===true){d='<i class="xtiper_icon xtiper_icon_'+f.icon+'"></i>'}else{d='<img class="xtiper_icon" src="'+f.icon+'" />'}}return d};b.pt.findxoff=function(){var g=this;var j=g.c;var d=document.getElementsByClassName("xtiper");var h;for(var f=0;f<d.length;f++){var e=g.dataset(d[f],"xcstr");if(e&&e==g.xcstr){h=d[f]}}if(h){g.xtipdiv=h;g.mainid=h.getAttribute("id");h.style.zIndex=j.zindex;setTimeout(function(){var k=j.app===true?"xtiper_sheet":"xtiper_main";var l=h.getElementsByClassName(k)[0];var o=g.dataset(h,"xwidth");var p=g.dataset(h,"xheight");var n=(a.innerWidth-o)/2;var i=(a.innerHeight-p)/2;if(k=="xtiper_main"){l.style.width=o+"px";l.style.height=p+"px";l.style.left=n+"px";l.style.top=i+"px";var q=h.getElementsByClassName("xtiper_min")[0];var m=h.getElementsByClassName("xtiper_max")[0];if(q){q.style.display="";q.classList.remove("xon")}if(m){m.style.display="";m.classList.remove("xon")}}if(j.lock===true){g.lock()}h.classList.remove("xoff")},1);return true}else{return false}};b.pt.dataset=function(e,d,f){if(f==null){if(e){return e.getAttribute("data-"+d)}}else{e.setAttribute("data-"+d,f)}};b.pt.attr=function(){var o=this;var E=o.c;var u=o.xtipdiv;if(E.model=="msg"){u.classList.add("xtiper_msg");u.classList.add("xtiper_msg_"+E.pos);u.classList.add("xtiper_msg_"+E.type);u.style.whiteSpace="nowrap";var q=u.offsetWidth;q=q/2;u.style.marginLeft="-"+q+"px";u.style.whiteSpace=""}else{if(E.model=="danmu"){u.classList.add("xtiper_msg");u.classList.add("xtiper_msg_"+E.type);u.classList.add("xtiper_danmu");function l(C,y){var B=Math.round(Math.random()*(y-C))+C;return B}var m=Math.round(a.innerHeight*0.65);var i=l(10,m);var x=document.body.offsetWidth+22;u.style.transform="translateX("+x+"px)";u.style.top=i+"px";var k=document.getElementsByClassName("xtiper_danmu");if(k.length>1){if(E.light===true){u.classList.add("xtiper_danmu_light")}}}else{if(E.model=="tips"){u.classList.add("xtiper_tips");u.classList.add("xtiper_tips_"+E.pos);u.style.width=u.offsetWidth+"px";var z=document.getElementById(E.element)||E.element;var h=document.documentElement.scrollTop||document.body.scrollTop;var v=z.getBoundingClientRect();var f=z.offsetWidth;var s=z.offsetHeight;var t=h+v.top;var F=v.left;var w=10;if(E.pos=="left"){var e=u.offsetWidth;F=F-e-w}else{if(E.pos=="right"){F=F+f+w}else{if(E.pos=="top"){var J=u.offsetHeight;t=t-J-w}else{if(E.pos=="bottom"){t=t+s+w}}}}u.style.left=F+"px";u.style.top=t+"px"}else{if(E.model=="win"||E.model=="open"){u.classList.add("xtiper_win");if(E.shade===true){u.classList.add("xtiper_win_fixed")}var G=E.app===true?"xtiper_sheet":"xtiper_main";var g=u.getElementsByClassName(G)[0];var n=u.getElementsByClassName("xtiper_tit")[0];o.dataset(u,"xwidth",g.offsetWidth);o.dataset(u,"xheight",g.offsetHeight);if(E.reset===false){o.dataset(u,"xreset",1)}if(E.model=="open"&&o.xcstr){o.dataset(u,"xcstr",o.xcstr)}if(E.min===true||E.max===true){var D="xmcss";var p=0;if(E.min===true){p++}if(E.max===true){p++}D=D+p;if(n){n.classList.add(D)}}var j,r;if(E.model=="win"){var A=o.getsize(E.width);if(A&&A[1]=="%"){j=(100-A[0])/2+"%"}else{j=(a.innerWidth-g.offsetWidth)/2+"px"}r=(a.innerHeight-g.offsetHeight)/2+"px";g.style.height=g.offsetHeight+"px";g.style.left=j;g.style.top=r}else{if(E.model=="open"){if(E.type=="ready"){g.getElementsByClassName("xtiper_content")[0].firstChild.style.display=""}if(E.app===false){var A=o.getsize(E.width);if(E.type=="photo"&&E.autoHeight===true){var d=E.index-1;var I=u.getElementsByClassName("xtiper_photo_li")[d].getElementsByTagName("img")[0];I.onload=function(){var y=I.offsetHeight;y=y+100;if(y>a.innerHeight){if(E.title){y=a.innerHeight}else{y=a.innerHeight-26}}r=(a.innerHeight-y)/2;r=E.y?r+E.y:r;r=r+"px";g.style.height=y+"px";if(A[1]=="%"){j=(100-A[0])/2;j=E.x?j+E.x:j;j=j+A[1]}else{j=(a.innerWidth-g.offsetWidth)/2;j=E.x?j+E.x:j;j=j+"px"}g.style.left=j;g.style.top=r}}else{g.style.height=g.offsetHeight+"px";r=(a.innerHeight-g.offsetHeight)/2;r=E.y?r+E.y:r;r=r+"px"}if(A[1]=="%"){j=(100-A[0])/2;j=E.x?j+E.x:j;j=j+A[1]}else{j=(a.innerWidth-g.offsetWidth)/2;j=E.x?j+E.x:j;j=j+"px"}g.style.left=j;g.style.top=r}}}if(E.shade===false){g.style.position="fixed"}}else{if(E.model=="load"){u.classList.add("xtiper_win");u.classList.add("xtiper_win_fixed")}else{if(E.model=="sheet"){u.classList.add("xtiper_win");u.classList.add("xtiper_win_fixed")}}}}}}if(E.zindex){u.style.zIndex=E.zindex}};b.pt.on=function(){var e=this;var f=e.c;var d=e.xtipdiv;setTimeout(function(){d.classList.add("xon")},1)};b.pt.after=function(){var j=this;var k=j.c;var h=j.xtipdiv;if(k.model=="msg"||k.model=="tips"){j.autoClose();if(k.model=="tips"){j.shade()}}else{if(k.model=="danmu"){j.danmuStar();h.addEventListener("mouseenter",function(){j.danmuStop()});h.addEventListener("mouseleave",function(){j.danmuStar()})}else{if(k.model=="win"||k.model=="open"){if(k.model=="win"){var g=h.getElementsByTagName("button");var q=j.btnfun;for(var f=0;f<4;f++){j.bclick(g[f],q[f],true)}}if(k.min){var l=h.getElementsByClassName("xtiper_min")[0];if(l){l.addEventListener("click",function(){j.minmax("min")})}}if(k.max){var o=h.getElementsByClassName("xtiper_max")[0];if(o){o.addEventListener("click",function(){j.minmax("max")})}}if(k.move===true){j.drag(true)}j.shade();if(k.model=="win"||k.model=="open"){j.key()}if(k.model=="win"&&k.type=="alert"&&k.times>0){j.autoClose()}if(k.type=="photo"){j.photo();var d=k.index-1;var n=h.getElementsByClassName("xtiper_photo_li")[d];var p=h.getElementsByClassName("xtiper_words")[0];p.innerHTML=j.dataset(n,"xtitle")}}else{if(k.model=="load"){j.autoClose();j.shade()}else{if(k.model=="sheet"){j.shade();var q=j.btnfun;var e=h.getElementsByClassName("xtiper_sheet_li");var m=e.length;if(!k.force){m=m-1}for(var f=0;f<m;f++){j.bclick(e[f],q[f])}if(!k.force){e[m].addEventListener("click",function(){j.close();if(k.end){k.end()}})}}}}}}j.lock()};b.pt.ulli=function(m,e,d,k,n){var j=this;var g=j.xtipdiv;var l=g.getElementsByClassName("xtiper_content")[0];var h;for(var f=0;f<m.length;f++){if(m[f].classList.contains("xon")===true){if(e=="left"){if(d){m[f].style.left=d+"px"}else{m[f].style.left=""}}else{m[f].style.left=d+"px";m[f].style.top=k+"px";h=1-((k/4*3)/120);if(h<0){h=0}l.style.backgroundColor="rgba(0,0,0,"+h+")";if(n===true){if(k>120){j.close()}else{m[f].style.left="";m[f].style.top="";l.style.backgroundColor="rgba(0,0,0,1)"}}}}}};b.pt.photo=function(){var k=this;var n=k.c;var j=k.xtipdiv;var l=j.getElementsByClassName("xtiper_photo_ul")[0];var q=j.getElementsByClassName("xtiper_photo_li");var h=j.getElementsByClassName("xtiper_photo_prev")[0];var i=j.getElementsByClassName("xtiper_photo_next")[0];if(h&&q.length>1){h.addEventListener("click",function(){k.photoBtn("prev")})}if(i&&q.length>1){i.addEventListener("click",function(){k.photoBtn("next")})}if(k.ifmob===true&&q.length>1){var e=null;var g,f,p,o,d,m;l.addEventListener("touchstart",function(r){g=r.changedTouches[0].pageX;p=r.changedTouches[0].pageY;k.touchmove(false)});l.addEventListener("touchmove",function(r){f=r.changedTouches[0].pageX;o=r.changedTouches[0].pageY;d=f-g;m=o-p;if(Math.abs(d)>Math.abs(m)){e=e?e:"left"}else{e=e?e:"top"}k.ulli(q,e,d,m)});l.addEventListener("touchend",function(r){if(g>f){if((g-f>40)&&e=="left"){k.photoBtn("next")}}else{if((f-g>40)&&e=="left"){k.photoBtn("prev")}}k.ulli(q,e,"",m,true);e=null});l.addEventListener("click",function(r){k.close()})}else{l.addEventListener("touchstart",function(r){return false});l.addEventListener("touchend",function(r){return false});l.addEventListener("click",function(r){return false})}};b.pt.photoBtn=function(o){var l=this;var n=l.c;var k=l.xtipdiv;var p=k.getElementsByClassName("xtiper_photo_li");var g=k.getElementsByClassName("xtiper_main")[0];if(g.classList.contains("xtiper_main_photo")===true){return false}g.classList.add("xtiper_main_photo");var m=0,f=0;for(var j=0;j<p.length;j++){if(p[j].classList.contains("xon")===true){m=f=j}}if(o=="prev"){m--;if(m<0){m=p.length-1}}else{if(o=="next"){m++;if(m>p.length-1){m=0}}}l.now=m;var d=m+1;var e=g.getElementsByClassName("xtiper_num")[0];e.innerHTML=d;var q=g.getElementsByClassName("xtiper_words")[0];var h;for(var j=0;j<p.length;j++){if(j==m){p[j].classList.add("xon");q.innerHTML=l.dataset(p[j],"xtitle");e.innerHTML=d;if(n.autoHeight===true){h=p[j].getElementsByTagName("img")[0].offsetHeight;h=h+100;if(h>a.innerHeight){if(n.title){h=a.innerHeight}else{h=a.innerHeight-26}}g.style.height=h+"px";g.style.top=((a.innerHeight-h)/2)+"px"}}else{p[j].classList.remove("xon")}if(j==f){p[j].classList.add("xold_"+o)}else{p[j].classList.remove("xold_prev");p[j].classList.remove("xold_next")}}setTimeout(function(){p[f].classList.remove("xold_"+o);g.classList.remove("xtiper_main_photo")},401)};b.pt.appScroll=function(d){d.preventDefault()};b.pt.touchmove=function(d){var e=this;if(d===false){document.body.addEventListener("touchmove",e.appScroll,{passive:false})}else{document.body.removeEventListener("touchmove",e.appScroll,{passive:false})}};b.pt.xcstrRep=function(f){f=f.replace(/[\s\n\r]/g,"");f=encodeURIComponent(f).toLowerCase();var e=[[/true/g,"1"],[/false/g,"0"],[/%/g,""],[/\(/g,""],[/\)/g,""],[/open/g,"o"],[/ready/g,"r"],[/noready/g,"n"],[/url/g,"u"],[/html/g,"h"],[/photo/g,"p"],[/function/g,"f"],[/99999/g,"9"]];for(var d=0;d<e.length;d++){f=f.replace(e[d][0],e[d][1])}return f};b.pt.maxSize=function(g,h){var f=this;var i=f.getsize(g)||"";var e=f.getsize(h);if(i&&i[1]=="px"&&e[1]=="%"){if(i[0]>a.innerWidth){var d=(e[0]>100?100:e[0])+"%";return d}else{return g}}else{return g}};b.pt.danmuStar=function(){var f=this;var g=f.c;var d=f.xtipdiv;d.classList.add("xtiper_danmu_animate");if(d.style.animationDuration==""){d.style.animationDuration="6s"}var e=Number(d.style.animationDuration.replace(/s/,""));f.dataset(d,"xdanmu",e);f.outtime=setTimeout(function(){f.close()},(e*1000)+1)};b.pt.danmuStop=function(){var h=this;var j=h.c;var d=h.xtipdiv;var i=document.body.offsetWidth+22;var g=d.getBoundingClientRect().left;d.style.transform="translateX("+g+"px)";if(h.outtime){clearInterval(h.outtime);h.outtime=null}var e=g/i;var f=6*e;if(f<0.4){f=0.4}h.dataset(d,"xdanmu",f);d.style.animationDuration=f+"s";d.classList.remove("xtiper_danmu_animate")};b.pt.bclick=function(e,d,g){var f=this;if(e){if(d&&typeof(d)=="function"){e.addEventListener("click",function(){d();f.close()})}else{if(g===true){e.addEventListener("click",function(){f.close()})}}}};b.pt.autoClose=function(){var g=this;var j=g.c;var d=g.xtipdiv;if(d.getElementsByClassName("xtiper_times")[0]){var h=j.times-1;var e=h;var f=function(){xtiper_times=d.getElementsByClassName("xtiper_times")[0];xtiper_times.innerHTML=e;if(e<=0){g.close();clearInterval(g.timer);g.timer=null}e--};g.timer=setInterval(f,1000);f()}else{var h=j.times;if(h&&h!=0){setTimeout(function(){g.close()},h*1000)}}};b.pt.lock=function(){var e=this;var f=e.c;var d=e.xtipdiv;if(f.lock===true){e.dataset(d,"xlock",1);document.documentElement.style.overflowY="hidden";e.touchmove(false)}};b.pt.unlock=function(){var g=this;var d=0;var e=document.getElementsByClassName("xtiper_win");for(var f=0;f<e.length;f++){if(g.dataset(e[f],"xlock")==1&&e[f].classList.contains("xoff")===false){d++}if(e[f].classList.contains("xoff")===true&&e[f].getAttribute("id")==g.mainid){d++}}if(d<=1){document.documentElement.style.overflowY=""}g.touchmove(true)};b.pt.minmax=function(m,t){var h=this;var s=h.c;var o=h.xtipdiv;var u,q,i;if(m=="min"){u=h.dataset(o,"xmin");q="190px";i="40px"}else{if(m=="max"){u=h.dataset(o,"xmax");q="100%";i="100%"}}var j=o.getElementsByClassName("xtiper_tit")[0];var f=o.getElementsByClassName("xtiper_main")[0];var p=o.getElementsByClassName("xtiper_content")[0];var r=o.getElementsByClassName("xtiper_min")[0];var l=o.getElementsByClassName("xtiper_max")[0];var d=o.getElementsByClassName("xtiper_bg")[0];if(u==1||t==1){f.style.width=h.dataset(o,"xwidth")+"px";f.style.height=h.dataset(o,"xheight")+"px";var n=f.offsetWidth;var e=f.offsetHeight;var g=(a.innerWidth-n)/2;var k=(a.innerHeight-e)/2;f.style.left=g+"px";f.style.top=k+"px";j.classList.remove("xminmax");j.classList.remove("xmin");j.getElementsByTagName("p")[0].setAttribute("title","");h.dataset(o,"xmin","");h.dataset(o,"xmax","");if(r){r.classList.remove("xon");r.style.display=""}if(l){l.classList.remove("xon");l.style.display=""}h.drag(true);if((s.model=="win"||s.model=="open")&&s.shade===true&&s.min===true){o.classList.add("xtiper_win_fixed");d.classList.remove("xmin");f.style.position=""}}else{f.style.width=q;f.style.height=i;j.classList.add("xminmax");if(m=="min"){j.classList.add("xmin");j.getElementsByTagName("p")[0].setAttribute("title",j.getElementsByTagName("p")[0].innerHTML);h.dataset(o,"xmin",1);f.style.top="auto";f.style.bottom="0";f.style.left="0";r.classList.add("xon");if(l){l.style.display="none"}if((s.model=="win"||s.model=="open")&&s.shade===true&&s.min===true){o.classList.remove("xtiper_win_fixed");d.classList.add("xmin");f.style.position="fixed"}}else{if(m=="max"){h.dataset(o,"xmax",1);f.style.top="0";f.style.left="0";l.classList.add("xon");if(r){r.style.display="none"}}}h.drag(false)}};b.pt.drag=function(e){var h=this;var i=h.c;var d=h.xtipdiv;var g=d.getElementsByClassName("xtiper_tit")[0];if(!g){return false}var f=d.getElementsByClassName("xtiper_main")[0];if(e===true){g.onmousedown=function(n){var m=f.offsetWidth/4*3;var k=f.offsetHeight/4*3;f.classList.add("xon");var n=n||a.event;var l=n.clientX-f.offsetLeft;var j=n.clientY-f.offsetTop;if(typeof f.setCapture!=="undefined"){f.setCapture()}document.onmousemove=function(q){var q=q||a.event;var p=q.clientX-l;var o=q.clientY-j;if(p<-m){p=-m}else{if(p>document.body.offsetWidth-f.offsetWidth+m){p=document.body.offsetWidth-f.offsetWidth+m}}if(o<0){o=0}else{if(o>a.innerHeight-f.offsetHeight+k){o=a.innerHeight-f.offsetHeight+k}}f.style.left=p+"px";f.style.top=o+"px"};document.onmouseup=function(o){f.classList.remove("xon");this.onmousemove=null;this.onmouseup=null;if(typeof f.releaseCapture!="undefined"){f.releaseCapture()}}}}else{g.onmousedown=function(j){return false;document.onmousemove=function(k){return false};document.onmouseup=function(k){return false}}}};b.pt.shade=function(){var f=this;var h=f.c;var d=f.xtipdiv;var g=d.getElementsByClassName("xtiper_close")[0];if(g){g.addEventListener("click",function(){f.close();if(h.end&&typeof(h.end)=="function"){h.end()}})}if(h.shadeClose){var e=d.getElementsByClassName("xtiper_bg")[0];e.addEventListener("click",function(){if(h.model=="sheet"&&h.force){xtip.msg(h.force);return false}else{f.close();if(h.end&&typeof(h.end)=="function"){h.end()}}})}};b.pt.key=function(){var e=this;var f=e.c;var d=e.xtipdiv;document.onkeydown=function(g){var h=g||a.event||arguments.callee.caller.arguments[0];if(h){if(h.keyCode==27){e.close()}else{if(h.keyCode==13){if(f.model=="win"){if(f.btn2||f.btn3){return false}e.close();if(f.btn1&&typeof(f.btn1)=="function"){f.btn1();f.btn1=null}return false}}else{return h}}}}};b.pt.close=function(e){var f=this;var j=f.c;var i=false;if(e){var d=document.getElementById(e);if(!d){return false}if(f.dataset(d,"xlock")==1){i=true}}else{var d=f.xtipdiv;if(j.lock===true){i=true}}if(!d){return false}var h=false;if(d.classList.contains("xtiper_danmu")===true){h=true}else{h=false}if(h===true){var g=d.parentNode;if(g){g.removeChild(d)}}else{if(f.dataset(d,"xreset")==1){d.classList.add("xoff");if(j.lock===true){f.unlock()}setTimeout(function(){d.style.zIndex="-99999";if(j.min===true){f.minmax("min",1)}if(j.max===true){f.minmax("max",1)}if(j.model=="open"&&j.type=="photo"){if(f.ifmob===true){var m=d.getElementsByClassName("xtiper_content")[0];m.style.backgroundColor="rgba(0,0,0,1)"}var k=d.getElementsByClassName("xtiper_photo_li");if(k.length>0){for(var l=0;l<k.length;l++){k[l].style.left="";k[l].style.top=""}}}},201)}else{d.classList.remove("xon");setTimeout(function(){var k=d.parentNode;if(k){k.removeChild(d)}},201)}}if(i===true){f.unlock()}};b.pt.closeAll=function(){var f=this;var e=document.getElementsByClassName("xtiper");if(e.length<=0){return false}for(var d=0;d<e.length;d++){f.close(e[d].getAttribute("id"))}document.documentElement.style.overflowY="";f.touchmove(true)};b.pt.getsize=function(d){if(d){reg=/([0-9]+)(px|\%)/;size_arr=d.match(reg);arr=new Array();arr[0]=Number(size_arr[1]);arr[1]=size_arr[2];return arr}};a.xtip={ver:"2.6.6",msg:function(e,d){if(!e){return false}d=d||{};var f={};f.model="msg";f.tip=e;f.times=d.times?d.times:2;f.type=d.type?d.type:"black";f.pos=d.pos?d.pos:"middle";f.icon=d.icon?d.icon:"";f.zindex=d.zindex?d.zindex:99999;return(this.run(f))},danmu:function(e,d){if(!e){return false}d=d||{};var f={};f.model="danmu";f.tip=e;f.type=d.type?d.type:"black";f.icon=d.icon?d.icon:"";f.light=d.light!=null?d.light:false;f.zindex=d.zindex?d.zindex:99999;return(this.run(f))},tips:function(i,f,d){if(!i||!f){return false}d=d||{};var j={};j.model="tips";j.tip=i;if(typeof(f)=="string"){var h=f.substr(0,1);if(h=="#"){f=f.substr(1,f.length)}}j.element=f;j.bgcolor=d.bgcolor?d.bgcolor:"#000000";if(d.color){j.color=d.color}else{var g=/rgba\((255\,){3}[0-9.]+/;var e=g.test(j.bgcolor);if(j.bgcolor=="#fff"||j.bgcolor=="#ffffff"||j.bgcolor=="white"||j.bgcolor=="rgb(255,255,255)"||j.bgcolor=="rgba(255,255,255)"||e===true){j.color="#333333"}else{j.color="#ffffff"}}j.times=d.times?d.times:2;j.pos=d.pos?d.pos:"right";j.closeBtn=d.closeBtn?d.closeBtn:false;j.zindex=d.zindex?d.zindex:99999;return(this.run(j))},alert:function(f,e,d){d=d||{};var g={};g.type="alert";g.tip=f?f:"";g.icon=e?e:"";g.title=d.title?d.title:"提示";if(d.btn){g.btn=typeof(d.btn)=="string"?[d.btn]:[d.btn[0]]}else{g.btn=["确定"]}g.times=d.times?d.times:0;g.shade=d.shade!=null?d.shade:true;return(this.win(g))},confirm:function(f,e,d){d=d||{};var g={};g.type="confirm";g.tip=f?f:"";g.btn1=e!=null?e:function(){return false};g.icon=d.icon?d.icon:"warning";g.title=d.title?d.title:"警告";g.btn=d.btn?d.btn:["确定","取消"];g.shade=d.shade!=null?d.shade:true;return(this.win(g))},win:function(d){if(!d){return false}var e={};e.model="win";e.tip=d.tip?d.tip:"";e.times=d.times?d.times:0;e.type=d.type?d.type:"confirm";e.icon=d.icon?d.icon:"";e.title=d.title?d.title:"提示";e.shade=d.shade!=null?d.shade:true;if(e.shade===true){e.shadeClose=d.shadeClose!=null?d.shadeClose:true}else{e.shadeClose=false}e.lock=d.lock?d.lock:false;e.btn=d.btn?d.btn:null;e.btn1=d.btn1!=null?d.btn1:null;e.btn2=d.btn2!=null?d.btn2:null;e.btn3=d.btn3!=null?d.btn3:null;e.btn4=d.btn4!=null?d.btn4:null;e.width=d.width?d.width:"";e.maxWidth=d.maxWidth?d.maxWidth:"";e.end=typeof(d.end)=="function"?d.end:null;e.min=d.min!=null?d.min:false;e.move=true;e.app=false;e.zindex=d.zindex?d.zindex:99999;return(this.run(e))},photo:function(e,d){if(!e){return false}d=d||{};var f={};f.type="photo";f.title=d.title?d.title:"";f.autoHeight=d.height?false:true;f.width=d.width?d.width:"600px";f.height=d.height?d.height:"400px";f.content=e;f.app=d.app!=null?d.app:false;f.lock=true;f.reset=true;f.index=d.index?d.index:1;f.iftitle=d.iftitle!=null?d.iftitle:true;f.iforder=d.iforder!=null?d.iforder:true;return(this.open(f))},photoApp:function(e,d){if(!e){return false}d=d||{};var f={};f.type="photo";f.width="100%";f.height="100%";f.bgcolor="rgba(0,0,0,1)";f.title=false;f.move=false;f.shade=true;f.shadeClose=false;f.closeBtn=true;f.content=e;f.photoapp=true;f.lock=true;f.reset=true;f.index=d.index?d.index:1;f.iftitle=d.iftitle!=null?d.iftitle:true;f.iforder=d.iforder!=null?d.iforder:true;return(this.open(f))},open:function(d){if(!d==null||!d.type||!d.content){return false}var h={};h.model="open";h.type=d.type;h.content=d.content;h.id=d.id?d.id:"";h.title=d.title?d.title:"";if(d.autoHeight){h.autoHeight=d.autoHeight}else{h.autoHeight=d.height?false:true}h.width=d.width?d.width:"600px";h.height=d.height?d.height:"400px";h.maxWidth=d.maxWidth?d.maxWidth:"";h.maxHeight=d.maxHeight?d.maxHeight:"";h.x=d.x?d.x:"";h.y=d.y?d.y:"";h.x=g(h.x);h.y=g(h.y);function g(l){if(l){if(!isNaN(l)){return Number(l)}else{var k=/\-?[0-9\.]*(px|%)*/,j,i;if(l){j=l.match(k);if(!j[1]||(j[1]&&j[1]=="px")){j[0]=j[0].replace(/px/g,"");i=Number(j[0])}else{i=""}return i}}}else{return""}}h.bgcolor=d.bgcolor?d.bgcolor:"";var f=/rgba\((0\,){3}[0-9.]+/;var e=f.test(h.bgcolor);if(h.bgcolor=="#000"||h.bgcolor=="#000000"||h.bgcolor=="black"||h.bgcolor=="rgb(0,0,0)"||h.bgcolor=="rgba(0,0,0)"||e===true){h.color="#ffffff"}else{h.color=""}h.shade=d.shade!=null?d.shade:true;if(h.shade===true){h.shadeClose=d.shadeClose!=null?d.shadeClose:true}else{h.shadeClose=false}h.end=typeof(d.end)=="function"?d.end:null;h.min=d.min!=null?d.min:false;h.max=d.max!=null?d.max:false;h.closeBtn=d.closeBtn!=null?d.closeBtn:true;h.move=d.move!=null?d.move:true;h.lock=d.lock!=null?d.lock:false;h.over=d.over!=null?d.over:true;h.index=d.index?d.index:1;h.app=d.app!=null?d.app:false;if(h.app===true){if(h.type=="photo"){return(this.photoApp(h.content,h.index))}else{h.height=d.height?d.height:"";h.lock=true;h.shade=true;h.shadeClose=true}}h.reset=d.reset!=null?d.reset:true;h.zindex=d.zindex?d.zindex:99999;h.photoapp=d.photoapp?d.photoapp:false;h.iftitle=d.iftitle!=null?d.iftitle:true;h.iforder=d.iforder!=null?d.iforder:true;return(this.run(h))},load:function(e,d){d=d||{};var f={};f.model="load";f.tip=e?e:"";f.times=d.times?d.times:0;f.lock=d.lock!=null?d.lock:false;f.zindex=d.zindex?d.zindex:99999;f.closeBtn=d.closeBtn!=null?d.closeBtn:false;return(this.run(f))},sheet:function(d){if(!d||!d.btn){return false}var g={};g.model="sheet";g.title=d.title?d.title:"";g.align=d.align?d.align:"center";var f=new Array();for(var e=0;e<8;e++){if(d.btn[e]){f[e]=d.btn[e]}}g.btn=f;g.btn1=d.btn1?d.btn1:null;g.btn2=d.btn2?d.btn2:null;g.btn3=d.btn3?d.btn3:null;g.btn4=d.btn4?d.btn4:null;g.btn5=d.btn5?d.btn5:null;g.btn6=d.btn6?d.btn6:null;g.btn7=d.btn7?d.btn7:null;g.btn8=d.btn8?d.btn8:null;g.force=d.force?d.force:"";g.btnClose=d.btnClose?d.btnClose:"取消";g.lock=true;g.shadeClose=true;g.end=typeof(d.end)=="function"?d.end:null;g.zindex=d.zindex?d.zindex:99999;return(this.run(g))},run:function(e){var d=new b(e);return d.mainid},close:function(d){var e={};e.model="close";e.closeid=d;return(this.run(e))},closeAll:function(){var d={};d.model="closeAll";return(this.run(d))}}}(window);